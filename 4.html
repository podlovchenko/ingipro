<!DOCTYPE html>
<meta charset="utf-8">
<body>
<link href="4.css" rel="stylesheet">
<script src="https://d3js.org/d3.v3.min.js"></script>

<script>

var width = 300,
    height = 300;

var state = false;

var color = "fill:red";

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.select(window)
    .on("mousemove", function() {
      if (state) {
        svg.append("circle")
        .attr("cx", d3.event.clientX)
        .attr("cy", d3.event.clientY)
        .attr("r", 5)
        .attr("style", color)
    }
})
    .on("mousedown", function() {
      state = true;
})
    .on("mouseup", function() {
      state = false;
      color = changeColor();
});


function changeColor() {
  var r = Math.floor(Math.random() * 255);
  var g = Math.floor(Math.random() * 255);
  var b = Math.floor(Math.random() * 255);
  return "fill:rgb(" + r + "," + g + "," + b + ")";
}

</script>